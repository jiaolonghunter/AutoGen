name: Sync to Gitee  # 工作流名称，会在Actions页面显示

# 添加以下三行，禁用邮件通知
env:
  ACTIONS_STEP_DEBUG: false
  GITHUB_NOTIFICATIONS_ENABLED: false
  
on:  # 触发此工作流的条件
  push:  # 当有代码推送到以下分支时触发
    branches: [ main ]
  schedule:  # 定时任务，每天UTC时间2点自动同步一次（作为备份机制）
    - cron: '0 2 * * *'

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
    # 1. 显式检出当前仓库的主分支
    - name: Checkout repository
      uses: actions/checkout@v4
      with:
        fetch-depth: 1 # 只获取最近一次提交，加速流程

    # 2. 执行镜像同步
    - name: Mirror to Gitee
      uses: wearerequired/git-mirror-action@v1
      env:
        SSH_PRIVATE_KEY: ${{ secrets.GITEE_SSH_PRIVATE_KEY }}
      with:
        destination-repo: git@gitee.com:jiaolonghunter/AutoGen.git
